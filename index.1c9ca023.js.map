{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/modules/Game.class.js"],"sourcesContent":["\"use strict\";\nconst $09e991522ca7e64e$var$startBtn = document.querySelector(\".start\");\nconst $09e991522ca7e64e$var$gameScore = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$gameField = document.querySelector(\".game-field\");\nconst $09e991522ca7e64e$var$tableBody = $09e991522ca7e64e$var$gameField.tBodies;\nconst $09e991522ca7e64e$var$tableRows = [\n    ...$09e991522ca7e64e$var$tableBody[0].children\n];\nconst $09e991522ca7e64e$var$startMessage = document.querySelector(\".message-start\");\nconst $09e991522ca7e64e$var$winMessage = document.querySelector(\".message-win\");\nconst $09e991522ca7e64e$var$loseMessage = document.querySelector(\".message-lose\");\nvar $a5fd07fa01589658$exports = {};\n\"use strict\";\nclass $a5fd07fa01589658$var$Game {\n    constructor(initialState){\n        this.initialState = initialState || [\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ]\n        ];\n        this.score = 0;\n        this.state = JSON.parse(JSON.stringify(this.initialState));\n        this.status = \"idle\";\n    }\n    moveLeft() {\n        const prevState = JSON.stringify(this.initialState);\n        for(let i = 0; i < this.state.length; i += 1){\n            const row = this.state[i];\n            const filteredRow = row.filter((el)=>el !== 0);\n            const newRow = [];\n            let skip = false;\n            for(let j = 0; j < filteredRow.length; j += 1){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (filteredRow[j] === filteredRow[j + 1]) {\n                    this.score += filteredRow[j] * 2;\n                    newRow.push(filteredRow[j] * 2);\n                    skip = true;\n                } else newRow.push(filteredRow[j]);\n            }\n            while(newRow.length < 4)newRow.push(0);\n            this.state[i] = newRow;\n        }\n        if (JSON.stringify(this.state) !== prevState) {\n            this.addRandomToState();\n            this.checkWin();\n        }\n    }\n    moveRight() {\n        const prevState = JSON.stringify(this.initialState);\n        for(let i = 0; i < this.state.length; i += 1){\n            const row = this.state[i];\n            const filteredRow = row.filter((el)=>el !== 0);\n            const newRow = [];\n            let skip = false;\n            for(let j = filteredRow.length - 1; j >= 0; j -= 1){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (filteredRow[j] === filteredRow[j - 1]) {\n                    this.score += filteredRow[j] * 2;\n                    newRow.unshift(filteredRow[j] * 2);\n                    skip = true;\n                } else newRow.unshift(filteredRow[j]);\n            }\n            while(newRow.length < 4)newRow.unshift(0);\n            this.state[i] = newRow;\n        }\n        if (JSON.stringify(this.state) !== prevState) {\n            this.addRandomToState();\n            this.checkWin();\n        }\n    }\n    moveUp() {\n        const prevState = JSON.stringify(this.initialState);\n        for(let i = 0; i < this.state[0].length; i += 1){\n            const col = [];\n            for(let j = 0; j < this.state.length; j += 1)col.push(this.state[j][i]);\n            const filteredCol = col.filter((el)=>el !== 0);\n            const newCol = [];\n            let skip = false;\n            for(let k = 0; k < filteredCol.length; k += 1){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (filteredCol[k] === filteredCol[k + 1]) {\n                    this.score += filteredCol[k] * 2;\n                    newCol.push(filteredCol[k] * 2);\n                    skip = true;\n                } else newCol.push(filteredCol[k]);\n            }\n            while(newCol.length < 4)newCol.push(0);\n            for(let row = 0; row < this.state.length; row += 1)this.state[row][i] = newCol[row];\n        }\n        if (JSON.stringify(this.state) !== prevState) {\n            this.addRandomToState();\n            this.checkWin();\n        }\n    }\n    moveDown() {\n        const prevState = JSON.stringify(this.initialState);\n        for(let i = 0; i < this.state[0].length; i += 1){\n            const col = [];\n            for(let j = 0; j < this.state.length; j += 1)col.push(this.state[j][i]);\n            const filteredCol = col.filter((el)=>el !== 0);\n            const newCol = [];\n            let skip = false;\n            for(let k = filteredCol.length - 1; k >= 0; k -= 1){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (filteredCol[k] === filteredCol[k - 1]) {\n                    this.score += filteredCol[k] * 2;\n                    newCol.unshift(filteredCol[k] * 2);\n                    skip = true;\n                } else newCol.unshift(filteredCol[k]);\n            }\n            while(newCol.length < 4)newCol.unshift(0);\n            for(let row = 0; row < this.state.length; row += 1)this.state[row][i] = newCol[row];\n        }\n        if (JSON.stringify(this.state) !== prevState) {\n            this.addRandomToState();\n            this.checkWin();\n        }\n    }\n    getScore() {\n        return this.score;\n    }\n    getState() {\n        return this.state;\n    }\n    getStatus() {\n        return this.status;\n    }\n    start() {\n        this.status = \"playing\";\n        this.addRandomToState();\n        this.addRandomToState();\n    }\n    restart() {\n        this.state = [\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ]\n        ];\n        this.score = 0;\n        this.status = \"playing\";\n        this.addRandomToState();\n        this.addRandomToState();\n    }\n    getNumber() {\n        return Math.random() < 0.1 ? 4 : 2;\n    }\n    addRandomToState() {\n        const emptyCells = [];\n        for(let row = 0; row < this.state.length; row += 1){\n            for(let col = 0; col < this.state[row].length; col += 1)if (this.state[row][col] === 0) emptyCells.push({\n                row: row,\n                col: col\n            });\n        }\n        if (!this.makeMove()) {\n            this.status = \"lose\";\n            return;\n        }\n        const randomNumber = Math.floor(Math.random() * emptyCells.length);\n        const { row: selectedRow, col: selectedCol } = emptyCells[randomNumber];\n        this.state[selectedRow][selectedCol] = this.getNumber();\n    }\n    makeMove() {\n        const size = this.state.length;\n        for(let i = 0; i < size; i += 1)for(let j = 0; j < size; j += 1){\n            const cell = this.state[i][j];\n            if (cell === 0) return true;\n            if (i + 1 < size && cell === this.state[i + 1][j]) return true;\n            if (j + 1 < size && cell === this.state[i][j + 1]) return true;\n        }\n        return false;\n    }\n    checkWin() {\n        for (const row of this.state)if (row.includes(2048)) {\n            this.status = \"win\";\n            return true;\n        }\n        return false;\n    }\n}\n$a5fd07fa01589658$exports = $a5fd07fa01589658$var$Game;\n\n\nconst $09e991522ca7e64e$var$game = new $a5fd07fa01589658$exports();\nif ($09e991522ca7e64e$var$startBtn) $09e991522ca7e64e$var$startBtn.addEventListener(\"click\", ()=>{\n    if ($09e991522ca7e64e$var$game.getStatus() === \"idle\") $09e991522ca7e64e$var$game.start();\n    else $09e991522ca7e64e$var$game.restart();\n    $09e991522ca7e64e$var$getGameStatus();\n    $09e991522ca7e64e$var$displayActualState();\n    $09e991522ca7e64e$var$gameScore.textContent = $09e991522ca7e64e$var$game.getScore();\n});\ndocument.addEventListener(\"keydown\", (e)=>{\n    if ($09e991522ca7e64e$var$game.getStatus() === \"playing\") {\n        if (e.key === \"ArrowLeft\") $09e991522ca7e64e$var$game.moveLeft();\n        if (e.key === \"ArrowRight\") $09e991522ca7e64e$var$game.moveRight();\n        if (e.key === \"ArrowDown\") $09e991522ca7e64e$var$game.moveDown();\n        if (e.key === \"ArrowUp\") $09e991522ca7e64e$var$game.moveUp();\n        $09e991522ca7e64e$var$getGameStatus();\n        $09e991522ca7e64e$var$displayActualState();\n        $09e991522ca7e64e$var$gameScore.textContent = $09e991522ca7e64e$var$game.getScore();\n    }\n});\nfunction $09e991522ca7e64e$var$displayActualState() {\n    const state = $09e991522ca7e64e$var$game.getState();\n    for(let i = 0; i < $09e991522ca7e64e$var$tableRows.length; i += 1){\n        const cells = [\n            ...$09e991522ca7e64e$var$tableRows[i].children\n        ];\n        for(let j = 0; j < cells.length; j += 1){\n            cells[j].textContent = state[i][j] || \"\";\n            cells[j].className = \"field-cell\";\n            if (cells[j].textContent) cells[j].classList.add(`field-cell--${cells[j].textContent}`);\n        }\n    }\n}\nfunction $09e991522ca7e64e$var$getGameStatus() {\n    const statusGame = $09e991522ca7e64e$var$game.getStatus();\n    $09e991522ca7e64e$var$startMessage.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$winMessage.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$loseMessage.classList.add(\"hidden\");\n    if (statusGame === \"idle\") {\n        $09e991522ca7e64e$var$startMessage.classList.remove(\"hidden\");\n        $09e991522ca7e64e$var$startBtn.classList.add(\"start\");\n        $09e991522ca7e64e$var$startBtn.classList.remove(\"restart\");\n        $09e991522ca7e64e$var$startBtn.textContent = \"Start\";\n    }\n    if (statusGame === \"playing\") {\n        $09e991522ca7e64e$var$startBtn.classList.remove(\"start\");\n        $09e991522ca7e64e$var$startBtn.classList.add(\"restart\");\n        $09e991522ca7e64e$var$startBtn.textContent = \"Restart\";\n    }\n    if (statusGame === \"win\") $09e991522ca7e64e$var$winMessage.classList.remove(\"hidden\");\n    if (statusGame === \"lose\") $09e991522ca7e64e$var$loseMessage.classList.remove(\"hidden\");\n}\n\n\n//# sourceMappingURL=index.1c9ca023.js.map\n","'use strict';\n\nconst startBtn = document.querySelector('.start');\nconst gameScore = document.querySelector('.game-score');\nconst gameField = document.querySelector('.game-field');\nconst tableBody = gameField.tBodies;\nconst tableRows = [...tableBody[0].children];\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\n\nconst Game = require('../modules/Game.class');\nconst game = new Game();\n\nif (startBtn) {\n  startBtn.addEventListener('click', () => {\n    if (game.getStatus() === 'idle') {\n      game.start();\n    } else {\n      game.restart();\n    }\n\n    getGameStatus();\n    displayActualState();\n    gameScore.textContent = game.getScore();\n  });\n}\n\ndocument.addEventListener('keydown', (e) => {\n  if (game.getStatus() === 'playing') {\n    if (e.key === 'ArrowLeft') {\n      game.moveLeft();\n    }\n\n    if (e.key === 'ArrowRight') {\n      game.moveRight();\n    }\n\n    if (e.key === 'ArrowDown') {\n      game.moveDown();\n    }\n\n    if (e.key === 'ArrowUp') {\n      game.moveUp();\n    }\n\n    getGameStatus();\n    displayActualState();\n    gameScore.textContent = game.getScore();\n  }\n});\n\nfunction displayActualState() {\n  const state = game.getState();\n\n  for (let i = 0; i < tableRows.length; i += 1) {\n    const cells = [...tableRows[i].children];\n\n    for (let j = 0; j < cells.length; j += 1) {\n      cells[j].textContent = state[i][j] || '';\n      cells[j].className = 'field-cell';\n\n      if (cells[j].textContent) {\n        cells[j].classList.add(`field-cell--${cells[j].textContent}`);\n      }\n    }\n  }\n}\n\nfunction getGameStatus() {\n  const statusGame = game.getStatus();\n\n  startMessage.classList.add('hidden');\n  winMessage.classList.add('hidden');\n  loseMessage.classList.add('hidden');\n\n  if (statusGame === 'idle') {\n    startMessage.classList.remove('hidden');\n\n    startBtn.classList.add('start');\n    startBtn.classList.remove('restart');\n    startBtn.textContent = 'Start';\n  }\n\n  if (statusGame === 'playing') {\n    startBtn.classList.remove('start');\n    startBtn.classList.add('restart');\n    startBtn.textContent = 'Restart';\n  }\n\n  if (statusGame === 'win') {\n    winMessage.classList.remove('hidden');\n  }\n\n  if (statusGame === 'lose') {\n    loseMessage.classList.remove('hidden');\n  }\n}\n","'use strict';\nclass Game {\n  constructor(initialState) {\n    this.initialState = initialState || [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    this.score = 0;\n    this.state = JSON.parse(JSON.stringify(this.initialState));\n    this.status = 'idle';\n  }\n\n  moveLeft() {\n    const prevState = JSON.stringify(this.initialState);\n\n    for (let i = 0; i < this.state.length; i += 1) {\n      const row = this.state[i];\n      const filteredRow = row.filter((el) => el !== 0);\n      const newRow = [];\n      let skip = false;\n\n      for (let j = 0; j < filteredRow.length; j += 1) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (filteredRow[j] === filteredRow[j + 1]) {\n          this.score += filteredRow[j] * 2;\n          newRow.push(filteredRow[j] * 2);\n          skip = true;\n        } else {\n          newRow.push(filteredRow[j]);\n        }\n      }\n\n      while (newRow.length < 4) {\n        newRow.push(0);\n      }\n\n      this.state[i] = newRow;\n    }\n\n    if (JSON.stringify(this.state) !== prevState) {\n      this.addRandomToState();\n      this.checkWin();\n    }\n  }\n\n  moveRight() {\n    const prevState = JSON.stringify(this.initialState);\n\n    for (let i = 0; i < this.state.length; i += 1) {\n      const row = this.state[i];\n      const filteredRow = row.filter((el) => el !== 0);\n      const newRow = [];\n      let skip = false;\n\n      for (let j = filteredRow.length - 1; j >= 0; j -= 1) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (filteredRow[j] === filteredRow[j - 1]) {\n          this.score += filteredRow[j] * 2;\n          newRow.unshift(filteredRow[j] * 2);\n          skip = true;\n        } else {\n          newRow.unshift(filteredRow[j]);\n        }\n      }\n\n      while (newRow.length < 4) {\n        newRow.unshift(0);\n      }\n\n      this.state[i] = newRow;\n    }\n\n    if (JSON.stringify(this.state) !== prevState) {\n      this.addRandomToState();\n      this.checkWin();\n    }\n  }\n  moveUp() {\n    const prevState = JSON.stringify(this.initialState);\n\n    for (let i = 0; i < this.state[0].length; i += 1) {\n      const col = [];\n\n      for (let j = 0; j < this.state.length; j += 1) {\n        col.push(this.state[j][i]);\n      }\n\n      const filteredCol = col.filter((el) => el !== 0);\n      const newCol = [];\n      let skip = false;\n\n      for (let k = 0; k < filteredCol.length; k += 1) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (filteredCol[k] === filteredCol[k + 1]) {\n          this.score += filteredCol[k] * 2;\n          newCol.push(filteredCol[k] * 2);\n          skip = true;\n        } else {\n          newCol.push(filteredCol[k]);\n        }\n      }\n\n      while (newCol.length < 4) {\n        newCol.push(0);\n      }\n\n      for (let row = 0; row < this.state.length; row += 1) {\n        this.state[row][i] = newCol[row];\n      }\n    }\n\n    if (JSON.stringify(this.state) !== prevState) {\n      this.addRandomToState();\n      this.checkWin();\n    }\n  }\n  moveDown() {\n    const prevState = JSON.stringify(this.initialState);\n\n    for (let i = 0; i < this.state[0].length; i += 1) {\n      const col = [];\n\n      for (let j = 0; j < this.state.length; j += 1) {\n        col.push(this.state[j][i]);\n      }\n\n      const filteredCol = col.filter((el) => el !== 0);\n      const newCol = [];\n      let skip = false;\n\n      for (let k = filteredCol.length - 1; k >= 0; k -= 1) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (filteredCol[k] === filteredCol[k - 1]) {\n          this.score += filteredCol[k] * 2;\n          newCol.unshift(filteredCol[k] * 2);\n          skip = true;\n        } else {\n          newCol.unshift(filteredCol[k]);\n        }\n      }\n\n      while (newCol.length < 4) {\n        newCol.unshift(0);\n      }\n\n      for (let row = 0; row < this.state.length; row += 1) {\n        this.state[row][i] = newCol[row];\n      }\n    }\n\n    if (JSON.stringify(this.state) !== prevState) {\n      this.addRandomToState();\n      this.checkWin();\n    }\n  }\n\n  getScore() {\n    return this.score;\n  }\n\n  getState() {\n    return this.state;\n  }\n\n  getStatus() {\n    return this.status;\n  }\n\n  start() {\n    this.status = 'playing';\n    this.addRandomToState();\n    this.addRandomToState();\n  }\n\n  restart() {\n    this.state = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    this.score = 0;\n    this.status = 'playing';\n    this.addRandomToState();\n    this.addRandomToState();\n  }\n\n  getNumber() {\n    return Math.random() < 0.1 ? 4 : 2;\n  }\n\n  addRandomToState() {\n    const emptyCells = [];\n\n    for (let row = 0; row < this.state.length; row += 1) {\n      for (let col = 0; col < this.state[row].length; col += 1) {\n        if (this.state[row][col] === 0) {\n          emptyCells.push({ row, col });\n        }\n      }\n    }\n\n    if (!this.makeMove()) {\n      this.status = 'lose';\n\n      return;\n    }\n\n    const randomNumber = Math.floor(Math.random() * emptyCells.length);\n    const { row: selectedRow, col: selectedCol } = emptyCells[randomNumber];\n\n    this.state[selectedRow][selectedCol] = this.getNumber();\n  }\n\n  makeMove() {\n    const size = this.state.length;\n\n    for (let i = 0; i < size; i += 1) {\n      for (let j = 0; j < size; j += 1) {\n        const cell = this.state[i][j];\n\n        if (cell === 0) {\n          return true;\n        }\n\n        if (i + 1 < size && cell === this.state[i + 1][j]) {\n          return true;\n        }\n\n        if (j + 1 < size && cell === this.state[i][j + 1]) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  checkWin() {\n    for (const row of this.state) {\n      if (row.includes(2048)) {\n        this.status = 'win';\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n\nmodule.exports = Game;\n"],"names":["$09e991522ca7e64e$var$startBtn","document","querySelector","$09e991522ca7e64e$var$gameScore","$09e991522ca7e64e$var$tableRows","$09e991522ca7e64e$var$tableBody","$09e991522ca7e64e$var$gameField","tBodies","children","$09e991522ca7e64e$var$startMessage","$09e991522ca7e64e$var$winMessage","$09e991522ca7e64e$var$loseMessage","$09e991522ca7e64e$var$game","constructor","initialState","score","state","JSON","parse","stringify","status","moveLeft","prevState","i","length","filteredRow","row","filter","el","newRow","skip","j","push","addRandomToState","checkWin","moveRight","unshift","moveUp","col","filteredCol","newCol","k","moveDown","getScore","getState","getStatus","start","restart","getNumber","Math","random","emptyCells","makeMove","randomNumber","floor","selectedRow","selectedCol","size","cell","includes","$09e991522ca7e64e$var$displayActualState","cells","textContent","className","classList","add","$09e991522ca7e64e$var$getGameStatus","statusGame","remove","addEventListener","e","key"],"version":3,"file":"index.1c9ca023.js.map"}